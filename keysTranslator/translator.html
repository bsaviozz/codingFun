<html>
    <head>
        <meta charset="UTF-8">
        <title>JS Drum Kit</title>
        <link rel="stylesheet" href="drum.css">
      </head>
    <body>
        <div class="header">
            <button onclick="setTranslator(this.id)" id="ascii" class="btn">
                ASCII
            </button>
            <button onclick="setTranslator(this.id)" id="dtb" class="btn">
                DECIMAL to BINARY
            </button>
            <button onclick="setTranslator(this.id)" id="btd" class="btn">
                BINARY to DECIMAL
            </button>
            <button onclick="setTranslator(this.id)" id="dth" class="btn">
                DECIMAL to HEX
            </button>
            <button onclick="setTranslator(this.id)" id="htd" class="btn">
                HEX to DECIMAL
            </button>
        </div>
        <div class="translation">
            <p class="start">Click a key</p>
            <p class="tr" id="tr"></p>
            <p class="og" id="og"></p>

        </div>

        <script>
            var translatorType = "ascii";
            var currentNumber = ""; // String to accumulate current number input

            function setTranslator(clicked) {
                translatorType = clicked;
                document.getElementById("tr").innerHTML = ""; 
                document.getElementById("og").innerHTML = ""; 
                currentNumber = "";
            }

            function translateASCII(e){ 
                console.log(translatorType);
                let key = e.key;

                if(key.match(/^[a-zA-Z0-9]$/)){
                    document.getElementById("tr").innerHTML = key.charCodeAt(0); 
                    document.getElementById("og").innerHTML = key;   
                } 
            }

            function translateBinary(e){
                console.log(translatorType);
                let key = e.key;
                let tr = document.getElementById("tr");
                let og = document.getElementById("og");

                if (key === "Backspace") {
                    if (og.innerHTML.length > 0) {
                        og.innerHTML = og.innerHTML.slice(0, -1); // Remove the last character
            
                        let binaryValues = tr.innerHTML.trim().split(" ");
                        binaryValues.pop(); // Remove the last binary value
                        tr.innerHTML = binaryValues.join(" ") + " ";
                    }
                } else if (key.match(/^[a-zA-Z]$/)) {
                    let binaryString = key.charCodeAt(0).toString(2).padStart(8, '0'); // Convert letter to 8-bit binary
                    tr.innerHTML += binaryString + " "; 
                    og.innerHTML += key; 

                } else if (key.match(/^[0-9]$/)) {  
                    currentNumber += key;
                    og.innerHTML += key;
                    if (currentNumber !== "") {
                        let binaryString = parseInt(currentNumber).toString(2).padStart(8, '0'); // Convert number to 8-bit binary
                        tr.innerHTML = binaryString; 
                    }

                } 
            }

            window.addEventListener('keydown', function(e) {
                switch(translatorType){
                    case "ascii":
                        translateASCII(e);
                        break;
                    case "dtb":
                        translateBinary(e);
                        break;
                }
            });
            
        </script>
    </body>
</html>